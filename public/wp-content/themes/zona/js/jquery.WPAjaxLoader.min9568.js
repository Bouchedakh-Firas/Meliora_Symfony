/*!
 * WPAjaxLoader ver. 2.0.1
 * jQuery Ajax Loader for Wordpress
 *
 * Copyright (c) 2016-2019
 * Rascals Themes
 *
 */


(function(a){a.WPAjaxLoader=function(b){var c={home_url:"",theme_uri:"",dir:"",permalinks:"",ajax_async:!0,ajax_cache:!1,ajax_events:"",ajax_elements:"",reload_containers:"",search_forms:"#searchform",header_container:"#header",nav:"",redirect:!1,content:"#ajax-content",excludes_links:"",reload_scripts:"/js/custom.js",start_delay:0,loadStart:function(){},loadEnd:function(){},redirectStart:function(){}},d=this,b=b||{};d.init=function(){function d(b){"use strict";var c=!1;return a.each(k.ajax_elements,function(d,e){if(b.is(a(e)))return c=!0,!1}),c}function e(b){"use strict";var c=!1;return a.each(k.excludes_links,function(a,d){if(""!==d&&-1<b.indexOf(d))return c=!0,!1}),c}function f(a){var b;if(!0==n)return!0;if("string"==typeof a)b=a;else{if(b=a.attr("href"),a.hasClass("comment-reply-link")||"cancel-comment-reply-link"===a.attr("id"))return!1;if(d(a))return!1;if(a.is("[target=\"_blank\"]"))return!1}return!(-1<b.indexOf("wp-admin")||-1<b.indexOf("wp-login"))&&(e(b)?(k.redirect=!0,!1):!(-1<b.indexOf(".jpg")||-1<b.indexOf(".png")||-1<b.indexOf(".gif")||-1<b.indexOf(".zip")||-1<b.indexOf(".pdf")||-1<b.indexOf(".mp3")||-1<b.indexOf("feed")))}function g(b){var c=b.split("</head")[0];for(meta_text=c.split("<meta ").length-1,meta_pos=0,metasprocessed=0,all_meta="";metasprocessed<meta_text;){var d=c.indexOf("<meta",meta_pos);end=c.indexOf(">",d),meta=c.substring(d,end),metasprocessed++,meta_pos=end,meta+=">",all_meta+=meta}a("head meta").remove(),a("head").append(all_meta);var e=b.replace("<body","<body><div id=\"body\"").replace("</body>","</div></body>"),f=a(e).filter("#body");a("body").removeClass(),a("body").attr("class",f.attr("class")),a("body").data("wp_title",f.data("wp_title")),a("body").data("page_id",f.data("page_id")),document.title=a("body").data("wp_title")}function h(b){b>=t.length||a.ajax({url:t[b],dataType:"script",async:!0,cache:!1}).done(function(){h(++u)}).error(function(){h(++u)})}function i(b){var c="",d=a("<div>"+b+"</div>").find("style"),e=a("<div>"+b+"</div>").find("link[type=\"text/css\"]");e.each(function(){-1==a.inArray(this.href,v)&&(a("head").append(this),v.push(this.href))}),d.each(function(){var b=a(this).attr("media"),d=a(this).html();(void 0===b||"screen"===b)&&(c+=d)}),a("style:not([media=\"print\"])").remove(),a("head").append("<style type=\"text/css\">"+c+"</style>")}function j(b){var c=a("<div>"+b+"</div>").find("#ajax-container");p.RemoveChildrenFromDom(),a("#ajax-container").html(c.html()),p=a("#ajax-content"),k.loadEnd.call(this),a("html, body").animate({scrollTop:0},0),q.length&&a(q).length&&setTimeout(function(){a(window).scrollTop(a(q).offset().top+s)},500),a.get(window.location)}var k=a.extend({},c,b);a.data(document,"WPAjaxLoader",k);var l,m=!0,n=!0,o=void 0!==window.history.pushState,p=a(k.content),q="",r=k.reload_scripts.split(","),s=0,t=[],u=0,v=[];k.ajax_async="on"==k.ajax_async,k.ajax_cache="on"==k.ajax_cache,k.reload_containers=k.reload_containers.split(","),k.ajax_events=k.ajax_events.split(","),k.ajax_elements=k.ajax_elements.split(","),k.excludes_links=k.excludes_links.split("|"),a(document).on("submit",k.search_forms,function(b){m=!1;var c=a(this).find("#s").val().replace(/ /g,"+");if(c){a.address.value("/?s="+c)}b.preventDefault()}),a("html").find("link[type=\"text/css\"]").each(function(){v.push(this.href)});var w=function(b){if(!0==n)return!1;q="",l=a(this);var c=!1,d=l.attr("href");if(f(l)){if(l.parents().hasClass("vc_tta-panels")&&(!l.hasClass("force-ajax")||!l.parents().hasClass("force-ajax")))return;if("#"===l.attr("href"))d=d.replace(q,""),q="";else if(q=d.split("#")[1],q?(q=a(this).attr("href").replace(/^.*?#/,""),q="#"+q,a(q).length?c=!0:(d=d.replace(q,""),s=a(this).data("offset"),(null==s||""==s)&&(s=parseInt(a(k.header_container).css("height"),10),s=-s))):q="",d!==window.location.href&&!1==c){var e=d;if(m=!1,""===e||"/"===e)a.address.state(k.dir).value(" ");else{var d=window.location.href,g=d.split("/"),h=g[0]+"//"+g[2]+k.dir;h=e.replace(h,""),"/"===h&&(h=" "),a.address.state(k.dir).value(h)}}else if(""!==q&&"#"!==q){var i=a(q).offset().top+s;a("html, body").animate({scrollTop:i},900)}}else return k.redirect?(k.redirectStart.call(this,d),!1):void 0;b.preventDefault()};return a(document).on("click","a:urlInternal, a:urlFragment",w),a(".dl-menu a:urlInternal, .dl-menu a:urlFragment").on("click",w),a.address.state(k.dir).init(function(){a(".site a:urlInternal:eq(-\"wp-admin\"):eq(-\"wp-login\"):eq(-\"#\"):eq(-\".jpg\"):eq(-\".gif\"):eq(-\".png\"):eq(-\".zip\"):eq(-\".pdf\"):eq(-\".mp4\"):eq(-\".mp3\"):eq(-\"feed\"):not([href=\"#\"])").address()}).change(function(b){var c=b.value,d=window.location;if(f(c)){var e=function(){l&&(k.loadStart.call(this),setTimeout(function(){if(!0==n){n=!1;var b=a(".site"),c=b.find("img").length;b.imagesLoaded({background:!0}).always(function(){k.loadEnd.call(this)}).progress(function(d,e){if(e.isLoaded){a(e.img).addClass("loaded");var f=b.find("img.loaded").length;a("#wpal-loader  .progress-bar").css({width:100*(f/c)+"%"})}})}else a.ajax({url:window.location.href,dataType:"html",cache:k.ajax_cache,async:k.ajax_async,success:function(b){var c,d,e=a("<div>"+b+"</div>").find("#ajax-container"),f=a(b);d=a("<div>"+b+"</div>"),c=a("<div>"+b+"</div>").find("script[src]"),a.each(k.reload_containers,function(b,c){a(c).html(d.find(c).html())}),""!=k.nav&&d.find(k.nav+" > ul > li ").each(function(){var b=a(this),d=b.attr("id"),e=b.attr("class");a("#"+d).attr("class",""),a("#"+d).addClass(e)});var l=e.find("img").length;e.imagesLoaded({background:!0}).always(function(){g(b),i(b),j(b),a.each(k.ajax_events,function(b,c){a(document).off(c)}),a(window).off("resize"),a(window).off("scroll"),u=0,t=[];var e=!1;c.each(function(){var b=a(this).attr("src");a("html script[src]").each(function(){if(a(this).attr("src")===b)return e=!0,e}),a.each(r,function(){if(-1<b.indexOf(this))return e=!0,!1}),!1==e&&t.push(b),e=!1}),a.each(r,function(){a("html script[src*=\""+this+"\"]").length?t.push(a("html script[src*=\""+this+"\"]").attr("src")):a("script[src*=\""+this+"\"]",d).length&&t.push(a("script[src*=\""+this+"\"]",d).attr("src"))}),h(0),a(b).filter("script:contains(\"theme_vars\")").each(function(){a.globalEval(this.text||this.textContent||this.innerHTML||"")})}).progress(function(b,c){if(c.isLoaded){a(c.img).addClass("loaded");var d=e.find("img.loaded").length;a("#wpal-loader  .progress-bar").css({width:100*(d/l)+"%"})}})},error:function(){window.location.href="0"==k.permalinks?k.home_url+"/?error=404":k.home_url+"/404"}})},k.start_delay),l=!1)},l=!0;e()}}),!1},d.init()},a.WPAjaxLoader.init=function(a){a()},a.fn.RemoveChildrenFromDom=function(){if(this){this.find("input[type=\"submit\"]").unbind(),this.children().empty().each(function(a,b){try{b.innerHTML=""}catch(a){}}),this.empty();try{this.get().innerHTML=""}catch(a){}}}})(jQuery);