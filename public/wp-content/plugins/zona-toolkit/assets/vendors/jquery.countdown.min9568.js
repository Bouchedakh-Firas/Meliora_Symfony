(function(a){a.fn.countdown=function(e,g){var d=["seconds","minutes","hours","days","weeks","daysLeft"];function f(h,i){return function(){return i.call(h)}}return this.each(function(){if(!(e instanceof Date)){if(String(e).match(/^[0-9]*$/)){e=new Date(e)}else{if(e.match(/([0-9]{1,2})\/([0-9]{1,2})\/([0-9]{2,4})\s([0-9]{1,2})\:([0-9]{2})\:([0-9]{2})/)||e.match(/([0-9]{2,4})\/([0-9]{1,2})\/([0-9]{1,2})\s([0-9]{1,2})\:([0-9]{2})\:([0-9]{2})/)){e=new Date(e)}else{if(e.match(/([0-9]{1,2})\/([0-9]{1,2})\/([0-9]{2,4})/)||e.match(/([0-9]{2,4})\/([0-9]{1,2})\/([0-9]{1,2})/)){e=new Date(e)}else{throw new Error("Doesn't seen to be a valid date object or string")}}}}var n=a(this),q={},h={},k=n.data("countdownInterval"),j=new Date(),l=Math.floor((e.valueOf()-j.valueOf())/1000);function m(){l--;if(l<0){l=0}h={seconds:l%60,minutes:Math.floor(l/60)%60,hours:Math.floor(l/60/60)%24,days:Math.floor(l/60/60/24),weeks:Math.floor(l/60/60/24/7),daysLeft:Math.floor(l/60/60/24)%7};for(var s=0;s<d.length;s++){var r=d[s];if(q[r]!=h[r]){q[r]=h[r];p(r)}}if(l==0){o();p("finished")}}m();function p(r){var s=a.Event(r);s.date=new Date(new Date().valueOf()+l);s.value=q[r]||"0";s.toDate=e;s.lasting=h;switch(r){case"seconds":case"minutes":case"hours":s.value=s.value<10?"0"+s.value.toString():s.value.toString();break;default:if(s.value){s.value=s.value.toString()}break}g.call(n,s)}n.bind("remove",function(){o();p("removed")});function o(){clearInterval(k)}function i(){n.data("countdownInterval",setInterval(f(n,m),1000));k=n.data("countdownInterval")}if(k){o()}i()})};var b=new a.Event("remove"),c=a.fn.remove;a.fn.remove=function(){a(this).trigger(b);return c.apply(this,arguments)}})(jQuery);